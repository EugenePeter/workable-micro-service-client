{"ast":null,"code":"var _jsxFileName = \"H:\\\\dev\\\\my_workflow\\\\my-app\\\\src\\\\server\\\\razzle.tsx\";\nvar __jsx = React.createElement;\nimport express from \"express\";\nimport React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter } from \"react-router-dom\";\nimport App from \"../client/App\";\nimport serialize from \"serialize-javascript\";\nconst {\n  APP_NAME = \"Eugene Peter Portal\",\n  PLATFORM_SOCKET_HOST = \"http://localhost:4401\"\n} = process.env;\nconst runtimeConfig = false ? {\n  // client\n  PLATFORM_SOCKET_HOST\n} : {\n  // server\n  PLATFORM_SOCKET_HOST\n};\n\nconst razzle = server => {\n  let assets;\n\n  const syncLoadAssets = () => {\n    assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\n  };\n\n  syncLoadAssets();\n\n  const serveIndex = (req, res) => {\n    const context = {};\n    const markup = renderToString(__jsx(StaticRouter, {\n      context: context,\n      location: req.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 13\n      }\n    }, __jsx(App, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 17\n      }\n    })));\n    res.send(`<!doctype html>\n      <html lang=\"\">\n      <head>\n          <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n          <meta charSet='utf-8' />\n          <title>${APP_NAME}</title>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n          ${assets.client.css ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">` : \"\"}\n            ${false ? `<script src=\"${assets.client.js}\" defer></script>` : `<script src=\"${assets.client.js}\" defer crossorigin></script>`}\n      </head>\n      <body>\n          <div id=\"root\">${markup}</div>\n          <script>window.env = ${serialize(runtimeConfig)};</script>\n  \n      </body>\n  </html>`);\n  };\n\n  server.use(\"/static\", express.static(\"build/public/static\"));\n  server.get(\"/*\", serveIndex);\n  server.disable(\"x-powered-by\");\n};\n\nexport default razzle;","map":{"version":3,"sources":["H:/dev/my_workflow/my-app/src/server/razzle.tsx"],"names":["express","React","renderToString","StaticRouter","App","serialize","APP_NAME","PLATFORM_SOCKET_HOST","process","env","runtimeConfig","razzle","server","assets","syncLoadAssets","require","RAZZLE_ASSETS_MANIFEST","serveIndex","req","res","context","markup","url","send","client","css","js","use","static","get","disable"],"mappings":";;AAAA,OAAOA,OAAP,MAAoD,SAApD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,MAAM;AAAEC,EAAAA,QAAQ,GAAG,qBAAb;AAAoCC,EAAAA,oBAAoB,GAAG;AAA3D,IAAuFC,OAAO,CAACC,GAArG;AAEA,MAAMC,aAAa,GACf,QACM;AACI;AACAH,EAAAA;AAFJ,CADN,GAKM;AACI;AACAA,EAAAA;AAFJ,CANV;;AAUA,MAAMI,MAAiC,GAAIC,MAAD,IAAqB;AAC3D,MAAIC,MAAJ;;AAEA,QAAMC,cAAc,GAAG,MAAM;AACzBD,IAAAA,MAAM,GAAGE,OAAO,CAACP,OAAO,CAACC,GAAR,CAAYO,sBAAb,CAAhB;AACH,GAFD;;AAGAF,EAAAA,cAAc;;AAEd,QAAMG,UAAU,GAAG,CAACC,GAAD,EAAeC,GAAf,KAAiC;AAChD,UAAMC,OAAO,GAAG,EAAhB;AACA,UAAMC,MAAM,GAAGnB,cAAc,CACzB,MAAC,YAAD;AAAc,MAAA,OAAO,EAAEkB,OAAvB;AAAgC,MAAA,QAAQ,EAAEF,GAAG,CAACI,GAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADyB,CAA7B;AAKAH,IAAAA,GAAG,CAACI,IAAJ,CACK;AACb;AACA;AACA;AACA;AACA,mBAAmBjB,QAAS;AAC5B;AACA,YAAYO,MAAM,CAACW,MAAP,CAAcC,GAAd,GAAqB,gCAA+BZ,MAAM,CAACW,MAAP,CAAcC,GAAI,IAAtE,GAA4E,EAAG;AAC3F,cACgB,QACO,gBAAeZ,MAAM,CAACW,MAAP,CAAcE,EAAG,mBADvC,GAEO,gBAAeb,MAAM,CAACW,MAAP,CAAcE,EAAG,+BAC1C;AACb;AACA;AACA,2BAA2BL,MAAO;AAClC,iCAAiChB,SAAS,CAACK,aAAD,CAAgB;AAC1D;AACA;AACA,UApBQ;AAsBH,GA7BD;;AA+BAE,EAAAA,MAAM,CAACe,GAAP,CAAW,SAAX,EAAsB3B,OAAO,CAAC4B,MAAR,CAAe,qBAAf,CAAtB;AAEAhB,EAAAA,MAAM,CAACiB,GAAP,CAAW,IAAX,EAAiBZ,UAAjB;AAEAL,EAAAA,MAAM,CAACkB,OAAP,CAAe,cAAf;AACH,CA5CD;;AA8CA,eAAenB,MAAf","sourcesContent":["import express, { Express, Request, Response } from \"express\";\nimport React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter } from \"react-router-dom\";\nimport App from \"../client/App\";\nimport serialize from \"serialize-javascript\";\nconst { APP_NAME = \"Eugene Peter Portal\", PLATFORM_SOCKET_HOST = \"http://localhost:4401\" } = process.env;\n\nconst runtimeConfig =\n    typeof window !== \"undefined\"\n        ? {\n              // client\n              PLATFORM_SOCKET_HOST,\n          }\n        : {\n              // server\n              PLATFORM_SOCKET_HOST,\n          };\nconst razzle: (server: Express) => void = (server: Express) => {\n    let assets: any;\n\n    const syncLoadAssets = () => {\n        assets = require(process.env.RAZZLE_ASSETS_MANIFEST!);\n    };\n    syncLoadAssets();\n\n    const serveIndex = (req: Request, res: Response) => {\n        const context = {};\n        const markup = renderToString(\n            <StaticRouter context={context} location={req.url}>\n                <App />\n            </StaticRouter>\n        );\n        res.send(\n            `<!doctype html>\n      <html lang=\"\">\n      <head>\n          <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n          <meta charSet='utf-8' />\n          <title>${APP_NAME}</title>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n          ${assets.client.css ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">` : \"\"}\n            ${\n                process.env.NODE_ENV === \"production\"\n                    ? `<script src=\"${assets.client.js}\" defer></script>`\n                    : `<script src=\"${assets.client.js}\" defer crossorigin></script>`\n            }\n      </head>\n      <body>\n          <div id=\"root\">${markup}</div>\n          <script>window.env = ${serialize(runtimeConfig)};</script>\n  \n      </body>\n  </html>`\n        );\n    };\n\n    server.use(\"/static\", express.static(\"build/public/static\"));\n\n    server.get(\"/*\", serveIndex);\n\n    server.disable(\"x-powered-by\");\n};\n\nexport default razzle;\n"]},"metadata":{},"sourceType":"module"}